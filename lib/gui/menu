#!/usr/bin/env bash

KEY=space
MOD='S-M'
ALTICON=
ICON=
COLOR=aqua

POSITION=RIGHT
NOWRAP=1

click() {
  local status icon

  IFS=: read -r status _ < <(sudo sv status sysupdate)

  case "$status" in
    down)
      sudo sv start sysupdate && icon=icon
      ;;
    run)
      sudo sv stop sysupdate && icon=alticon
      ;;
  esac

  gui awm iconupdate "$MODULE" "$icon"
}

view() {
	local menu
	read -r menu _ <<<"$1"
	gui "$menu" list
}

list() {
	gui | column -t -s: | sort -k4
}

BINDS[open]=enter
HOOKS[open]=open
CALLS[open]='become(menu shell {2})'
DESCS[open]='Open menu entry'
open() {
  :
}
