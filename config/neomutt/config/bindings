bind attach <return> view-mailcap

bind index <Space> noop
macro index <Space><Space> ":source ~/.config/neomutt/scripts/mailboxes|<enter>"

bind index,pager k previous-entry
bind index,pager j next-entry

bind index,pager K half-up
bind index,pager J half-down

#macro compose H "<attach-file>`/usr/bin/fzf`<enter>"

set my_cmd_browser = "<pipe-entry>"
set my_cmd_browser = "$my_cmd_browser iconv -c --to-code=UTF8 >"
set my_cmd_browser = "$my_cmd_browser ~/.cache/mutt/mail.html<enter>"
set my_cmd_browser = "$my_cmd_browser <shell-escape>"
set my_cmd_browser = "$my_cmd_browser browser ~/.cache/mutt/mail.html<enter>"

set my_cmd_firefox = "<pipe-entry>"
set my_cmd_firefox = "$my_cmd_firefox iconv -c --to-code=UTF8 >"
set my_cmd_firefox = "$my_cmd_firefox ~/.cache/mutt/mail.html<enter>"
set my_cmd_firefox = "$my_cmd_firefox <shell-escape>"
set my_cmd_firefox = "$my_cmd_firefox browser firefox ~/.cache/mutt/mail.html<enter>"

macro attach V "$my_cmd_browser"
macro index,pager V "<view-attachments><search>html<enter>Vq"

macro attach X "$my_cmd_firefox"
macro index,pager X "<view-attachments><search>html<enter>Xq"

set my_cmd_extract = "<enter-command>"
set my_cmd_extract = "$my_cmd_extract set pipe_decode = yes<enter>"
set my_cmd_extract = "<pipe-message>"
set my_cmd_extract = "$my_cmd_extract extract GR_URLS<enter>"
set my_cmd_extract = "<enter-command>"
set my_cmd_extract = "$my_cmd_extract set pipe_decode = no<enter>"

macro pager \Cb "$my_cmd_extract"
